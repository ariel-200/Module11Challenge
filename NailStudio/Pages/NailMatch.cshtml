@page
@model NailStudio.Pages.NailMatchModel
@{
    ViewData["Title"] = "Nail Match Studio";
}

<h1>Nail Match Studio</h1>
<p>Select one option from each category to find your perfect nail match.</p>

<!-- Validation summary for model-level errors -->
<div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

<form method="post" class="p-3 border rounded">

    <!-- COLOR OPTIONS -->
    <h4>Select a Color</h4>
    <div class="d-flex flex-wrap gap-3 mb-2">
        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Color" value="Pink" />
            <img src="/images/color_pink.jpg" class="option-img" alt="Pink nails" />
            <span>Pink</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Color" value="Nude" />
            <img src="/images/color_nude.jpg" class="option-img" alt="Nude nails" />
            <span>Nude</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Color" value="Red" />
            <img src="/images/color_red.jpg" class="option-img" alt="Red nails" />
            <span>Red</span>
        </label>
    </div>
    <span asp-validation-for="NailPreferences.Color" class="text-danger mb-3 d-block"></span>


    <!-- SHAPE OPTIONS -->
    <h4>Select a Shape</h4>
    <div class="d-flex flex-wrap gap-3 mb-2">
        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Shape" value="Coffin" />
            <img src="/images/shape_coffin.jpg" class="option-img" alt="Coffin shape nails" />
            <span>Coffin</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Shape" value="Almond" />
            <img src="/images/shape_almond.jpg" class="option-img" alt="Almond shape nails" />
            <span>Almond</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.Shape" value="Square" />
            <img src="/images/shape_square.jpg" class="option-img" alt="Square shape nails" />
            <span>Square</span>
        </label>
    </div>
    <span asp-validation-for="NailPreferences.Shape" class="text-danger mb-3 d-block"></span>


    <!-- DESIGN OPTIONS -->
    <h4>Select a Design</h4>
    <div class="d-flex flex-wrap gap-3 mb-2">
        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.DesignStyle" value="Simple" />
            <img src="/images/design_simple.jpg" class="option-img" alt="Simple nail design" />
            <span>Simple / Clean</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.DesignStyle" value="Glitter" />
            <img src="/images/design_glitter.jpg" class="option-img" alt="Glitter nail design" />
            <span>Glitter / Sparkle</span>
        </label>

        <label class="option-card">
            <input type="radio" asp-for="NailPreferences.DesignStyle" value="French" />
            <img src="/images/design_french.jpg" class="option-img" alt="French tip nails" />
            <span>French Tip</span>
        </label>
    </div>
    <span asp-validation-for="NailPreferences.DesignStyle" class="text-danger mb-3 d-block"></span>

    <button type="submit" class="btn btn-primary mt-2">Find My Nail Match</button>
</form>

<!-- SHOW MATCH RESULTS -->
@if (!string.IsNullOrEmpty(Model.MatchResult))
{
    <div class="alert alert-info mt-4">
        <strong>Your Match:</strong> @Model.MatchResult
    </div>

    @if (!string.IsNullOrEmpty(Model.MatchImagePath))
    {
        <div class="mt-3">
            <img src="@Model.MatchImagePath" alt="Matched nail design" class="img-fluid rounded" />
        </div>
    }
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<style>
    .option-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        border: 2px solid #ddd;
        border-radius: 10px;
        padding: 8px;
        cursor: pointer;
        width: 120px;
        transition: 0.2s;
        text-align: center;
        font-size: 0.9rem;
    }

    .option-card:hover {
        border-color: #ff80bf;
        box-shadow: 0 0 8px rgba(255, 128, 191, 0.4);
    }

    .option-card input[type="radio"] {
        display: none; /* hide the actual radio button */
    }

    .option-img {
        width: 90px;
        height: 90px;
        border-radius: 8px;
        object-fit: cover;
        margin-bottom: 5px;
        border: 2px solid transparent;
    }

    /* Highlight selected option (based on :checked input) */
    .option-card input[type="radio"]:checked + .option-img {
        border-color: #ff66b2;
    }

    .option-card input[type="radio"]:checked ~ span {
        font-weight: bold;
        color: #cc3377;
    }

    .gap-3 {
        gap: 1rem;
    }
</style>